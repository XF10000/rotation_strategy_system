# 数据模型设计 - 中线轮动策略系统

## 1. 核心数据结构

### 1.1 股票价格数据模型

```python
# 标准化的股票数据DataFrame结构
STOCK_DATA_SCHEMA = {
    'date': 'datetime64[ns]',      # 日期 (索引)
    'open': 'float64',             # 开盘价
    'high': 'float64',             # 最高价
    'low': 'float64',              # 最低价
    'close': 'float64',            # 收盘价
    'volume': 'int64',             # 成交量
    'amount': 'float64',           # 成交额 (可选)
    'turnover_rate': 'float64'     # 换手率 (可选)
}

# 示例数据
"""
                    open    high     low   close    volume      amount
date                                                                  
2023-01-02        10.50   10.80   10.30   10.75   1000000   10750000
2023-01-09        10.75   11.20   10.60   11.10   1200000   13200000
2023-01-16        11.10   11.50   10.90   11.30   1100000   12430000
"""
```

### 1.2 技术指标数据模型

```python
# 完整技术指标DataFrame结构
INDICATOR_DATA_SCHEMA = {
    'date': 'datetime64[ns]',      # 日期 (索引)
    'close': 'float64',            # 收盘价
    'volume': 'int64',             # 成交量
    
    # 趋势指标
    'ema_20': 'float64',           # 20周EMA
    'ema_trend_up': 'bool',        # EMA向上趋势
    
    # 动量指标
    'rsi_14': 'float64',           # 14周RSI
    'macd_dif': 'float64',         # MACD DIF线
    'macd_dea': 'float64',         # MACD DEA线
    'macd_hist': 'float64',        # MACD柱状图
    
    # 波动率指标
    'bb_upper': 'float64',         # 布林带上轨
    'bb_middle': 'float64',        # 布林带中轨
    'bb_lower': 'float64',         # 布林带下轨
    
    # 成交量指标
    'volume_ma_4': 'float64',      # 4周成交量均线
    'volume_ratio': 'float64',     # 量比
    
    # 背离信号
    'rsi_top_divergence': 'bool',  # RSI顶背离
    'rsi_bottom_divergence': 'bool' # RSI底背离
}
```

### 1.3 交易信号数据模型

```python
# 交易信号结构
SIGNAL_SCHEMA = {
    'stock_code': str,             # 股票代码
    'stock_name': str,             # 股票名称
    'date': str,                   # 信号日期
    'signal_type': str,            # 信号类型: 'BUY' | 'SELL' | 'HOLD'
    'confidence': int,             # 信号强度 (0-3分)
    'conditions': dict,            # 触发条件详情
    'current_price': float,        # 当前价格
    'dcf_valuation': float,        # DCF估值
    'valuation_ratio': float       # 估值比率
}

# 条件详情结构
CONDITIONS_SCHEMA = {
    'trend_filter': bool,          # 趋势过滤器
    'rsi_condition': bool,         # RSI条件
    'macd_condition': bool,        # MACD条件
    'price_volume_condition': bool, # 价量条件
    'total_score': int             # 总分
}

# 示例信号数据
SIGNAL_EXAMPLE = {
    'stock_code': '601088',
    'stock_name': '中国神华',
    'date': '2023-12-01',
    'signal_type': 'SELL',
    'confidence': 3,
    'conditions': {
        'trend_filter': True,
        'rsi_condition': True,
        'macd_condition': True,
        'price_volume_condition': True,
        'total_score': 3
    },
    'current_price': 25.80,
    'dcf_valuation': 28.00,
    'valuation_ratio': 0.92
}
```

### 1.4 行业信息缓存数据模型

```python
# 行业信息缓存结构
INDUSTRY_CACHE_SCHEMA = {
    'stock_code': str,             # 股票代码 -> 行业名称
    'cache_time': str,             # 缓存时间
    'source': str                  # 数据来源 ('static_mapping' | 'auto_recognition')
}

# 行业规则缓存结构
INDUSTRY_RULES_CACHE_SCHEMA = {
    'industry_name': {             # 行业名称
        'rsi_thresholds': {
            'overbought': float,   # 超买阈值
            'oversold': float      # 超卖阈值
        },
        'rsi_extreme_threshold': {
            'overbought': float,   # 极端超买阈值
            'oversold': float      # 极端超卖阈值
        },
        'divergence_required': bool,   # 是否需要背离确认
        'cache_time': str,         # 缓存时间
        'rule_version': str        # 规则版本
    }
}

# 行业缓存统计模型
INDUSTRY_CACHE_STATS_SCHEMA = {
    'industry_cache_size': int,        # 行业信息缓存数量
    'industry_rules_cache_size': int,  # 行业规则缓存数量
    'cache_hit_count': int,            # 缓存命中次数
    'cache_miss_count': int,           # 缓存未命中次数
    'cache_hit_rate': float,           # 缓存命中率
    'performance_improvement': float    # 性能提升倍数
}

# 示例行业缓存数据
INDUSTRY_CACHE_EXAMPLE = {
    '601088': '煤炭开采',
    '600900': '电力',
    '002738': '有色金属',
    'cache_time': '2025-01-27 21:40:00',
    'source': 'static_mapping'
}

INDUSTRY_RULES_EXAMPLE = {
    '煤炭开采': {
        'rsi_thresholds': {
            'overbought': 75.0,
            'oversold': 25.0
        },
        'rsi_extreme_threshold': {
            'overbought': 85.0,
            'oversold': 15.0
        },
        'divergence_required': True,
        'cache_time': '2025-01-27 21:40:00',
        'rule_version': 'v2.0'
    }
}
```

### 1.5 轮动决策数据模型

```python
# 轮动决策结构
ROTATION_DECISION_SCHEMA = {
    'date': str,                   # 决策日期
    'sell_candidates': list,       # 卖出候选列表
    'buy_candidates': list,        # 买入候选列表
    'rotation_pairs': list,        # 轮动对列表
    'cash_operations': dict        # 现金操作
}

# 轮动对结构
ROTATION_PAIR_SCHEMA = {
    'sell_stock': str,             # 卖出股票代码
    'buy_stock': str,              # 买入股票代码
    'sell_signal': dict,           # 卖出信号详情
    'buy_signal': dict,            # 买入信号详情
    'position_size': float,        # 轮动仓位比例
    'priority': int                # 优先级
}

# 现金操作结构
CASH_OPERATION_SCHEMA = {
    'sell_to_cash': list,          # 卖出转现金
    'buy_from_cash': list          # 现金买入
}
```

### 1.5 回测数据模型

```python
# 回测配置结构
BACKTEST_CONFIG_SCHEMA = {
    'start_date': str,             # 回测开始日期
    'end_date': str,               # 回测结束日期
    'initial_capital': float,      # 初始资金
    'commission_rate': float,      # 手续费率
    'stamp_tax_rate': float,       # 印花税率
    'slippage_rate': float,        # 滑点率
    'min_trade_amount': float      # 最小交易金额
}

# 持仓记录结构
POSITION_RECORD_SCHEMA = {
    'date': str,                   # 日期
    'stock_code': str,             # 股票代码
    'position_type': str,          # 持仓类型: 'LONG' | 'CASH'
    'shares': int,                 # 持股数量
    'avg_cost': float,             # 平均成本
    'market_value': float,         # 市值
    'weight': float                # 权重
}

# 交易记录结构
TRADE_RECORD_SCHEMA = {
    'date': str,                   # 交易日期
    'stock_code': str,             # 股票代码
    'action': str,                 # 交易动作: 'BUY' | 'SELL'
    'shares': int,                 # 交易股数
    'price': float,                # 交易价格
    'amount': float,               # 交易金额
    'commission': float,           # 手续费
    'stamp_tax': float,            # 印花税
    'slippage': float,             # 滑点成本
    'total_cost': float,           # 总成本
    'signal_confidence': int       # 信号强度
}

# 组合价值记录结构
PORTFOLIO_VALUE_SCHEMA = {
    'date': str,                   # 日期
    'total_value': float,          # 总资产
    'stock_value': float,          # 股票市值
    'cash_value': float,           # 现金
    'daily_return': float,         # 日收益率
    'cumulative_return': float,    # 累计收益率
    'positions': dict              # 各股票持仓详情
}
```

## 2. 数据存储格式

### 2.1 智能缓存文件存储结构

```
data_cache/
├── stock_data/                 # 股票数据缓存
│   ├── daily/                 # 日线数据
│   │   ├── 601088.csv
│   │   ├── 000807.csv
│   │   └── ...
│   └── weekly/                # 周线数据
│       ├── 601088.csv
│       ├── 000807.csv
│       └── ...
├── cache_metadata/             # 缓存元数据
│   ├── cache_info.json        # 缓存信息统计
│   ├── date_ranges.json       # 数据日期范围
│   └── last_update.json       # 最后更新时间
├── indicators/                 # 技术指标缓存
│   ├── 601088_indicators.csv
│   ├── 000807_indicators.csv
│   └── ...
├── signals/                    # 信号记录
│   ├── 2023-12-01_signals.json
│   ├── 2023-12-08_signals.json
│   └── ...
└── backtest_results/           # 回测结果
    ├── result_20231201_143022.json
    ├── trades_20231201_143022.csv
    └── ...
```

### 2.2 缓存元数据模型

```python
# 缓存信息统计模型
CACHE_INFO_SCHEMA = {
    'total_files': int,            # 缓存文件总数
    'total_size_mb': float,        # 缓存总大小(MB)
    'stocks_cached': list,         # 已缓存股票列表
    'periods_available': list,     # 可用数据周期
    'last_cleanup': str,           # 最后一次清理时间
    'cache_hit_rate': float        # 缓存命中率
}

# 数据日期范围模型
DATE_RANGES_SCHEMA = {
    'stock_code': {
        'daily': {
            'start_date': str,     # 最早数据日期
            'end_date': str,       # 最晚数据日期
            'total_records': int,  # 记录总数
            'missing_ranges': list # 缺失的日期范围
        },
        'weekly': {
            'start_date': str,
            'end_date': str,
            'total_records': int,
            'missing_ranges': list
        }
    }
}

# 最后更新时间模型
LAST_UPDATE_SCHEMA = {
    'stock_code': {
        'daily': str,              # 日线数据最后更新时间
        'weekly': str,             # 周线数据最后更新时间
        'indicators': str          # 指标数据最后更新时间
    }
}
```

### 2.4 CSV文件格式规范

```python
# 股票数据CSV格式
"""
date,open,high,low,close,volume,amount
2023-01-02,10.50,10.80,10.30,10.75,1000000,10750000.0
2023-01-09,10.75,11.20,10.60,11.10,1200000,13200000.0
"""

# 技术指标CSV格式
"""
date,close,volume,ema_20,rsi_14,macd_dif,macd_dea,macd_hist,bb_upper,bb_lower,volume_ma_4
2023-01-02,10.75,1000000,10.65,55.2,0.12,0.08,0.04,11.20,10.30,950000
2023-01-09,11.10,1200000,10.78,62.1,0.18,0.11,0.07,11.45,10.45,1050000
"""

# 基础交易记录CSV格式
"""
date,stock_code,action,shares,price,amount,commission,stamp_tax,slippage,total_cost,signal_confidence
2023-12-01,601088,SELL,1000,25.80,25800.0,7.74,25.80,25.80,59.34,3
2023-12-01,000807,BUY,1200,21.50,25800.0,7.74,0.0,25.80,33.54,2
"""

# 详细交易记录CSV格式（新增）
"""
日期,交易类型,股票代码,股票数量,交易价格,交易金额,手续费,收盘价,EMA20,EMA60,RSI14,MACD_DIF,MACD_DEA,MACD_HIST,布林上轨,布林中轨,布林下轨,成交量,量能倍数,布林带位置,趋势过滤器,超买超卖信号,动能确认,极端价格量能,满足维度数,信号强度评分,触发原因
2024-08-02,SELL,600900,4300,29.30,125990,292.30,29.30,28.5,27.8,75.2,0.45,0.32,0.13,30.2,28.8,27.4,4451935,1.2,上轨附近,满足,满足,满足,满足,4/4,3,转现金
"""
```

### 2.3 详细交易记录CSV字段说明

```python
# 详细交易记录字段定义
DETAILED_TRADE_RECORD_SCHEMA = {
    # 基础交易信息
    '日期': str,                    # 交易日期 (YYYY-MM-DD)
    '交易类型': str,                # BUY/SELL
    '股票代码': str,                # 6位股票代码
    '股票数量': int,                # 交易股数
    '交易价格': float,              # 成交价格
    '交易金额': float,              # 交易总金额
    '手续费': float,                # 交易手续费
    
    # 技术指标数据
    '收盘价': float,                # 当日收盘价
    'EMA20': float,                # 20周指数移动平均
    'EMA60': float,                # 60周指数移动平均
    'RSI14': float,                # 14周相对强弱指数
    'MACD_DIF': float,             # MACD快线
    'MACD_DEA': float,             # MACD慢线
    'MACD_HIST': float,            # MACD柱状图
    '布林上轨': float,              # 布林带上轨
    '布林中轨': float,              # 布林带中轨
    '布林下轨': float,              # 布林带下轨
    '成交量': int,                  # 当日成交量
    '量能倍数': float,              # 成交量相对均值倍数
    '布林带位置': str,              # 价格在布林带中的位置
    
    # 4维信号分析
    '趋势过滤器': str,              # 满足/不满足
    '超买超卖信号': str,            # 满足/不满足
    '动能确认': str,                # 满足/不满足
    '极端价格量能': str,            # 满足/不满足
    '满足维度数': str,              # X/4格式
    '信号强度评分': int,            # 0-3分
    '触发原因': str                 # 交易触发的具体原因
}
```

### 2.4 JSON文件格式规范

```python
# 信号记录JSON格式
SIGNALS_JSON_FORMAT = {
    "date": "2023-12-01",
    "signals": [
        {
            "stock_code": "601088",
            "stock_name": "中国神华",
            "signal_type": "SELL",
            "confidence": 3,
            "conditions": {
                "trend_filter": True,
                "rsi_condition": True,
                "macd_condition": True,
                "price_volume_condition": True,
                "total_score": 3
            },
            "current_price": 25.80,
            "dcf_valuation": 28.00,
            "valuation_ratio": 0.92
        }
    ],
    "rotation_decisions": {
        "rotation_pairs": [
            {
                "sell_stock": "601088",
                "buy_stock": "000807",
                "position_size": 0.10,
                "priority": 1
            }
        ],
        "cash_operations": {
            "sell_to_cash": [],
            "buy_from_cash": []
        }
    }
}

# 回测结果JSON格式
BACKTEST_RESULT_JSON_FORMAT = {
    "config": {
        "start_date": "2023-01-01",
        "end_date": "2023-12-31",
        "initial_capital": 1000000.0,
        "commission_rate": 0.0003,
        "stamp_tax_rate": 0.001,
        "slippage_rate": 0.001
    },
    "performance": {
        "total_return": 0.156,
        "annual_return": 0.156,
        "sharpe_ratio": 1.23,
        "max_drawdown": -0.085,
        "win_rate": 0.67,
        "profit_loss_ratio": 1.45,
        "total_trades": 24,
        "profitable_trades": 16
    },
    "final_portfolio": {
        "total_value": 1156000.0,
        "cash": 156000.0,
        "positions": {
            "601088": {"shares": 1000, "value": 250000.0, "weight": 0.216},
            "000807": {"shares": 1200, "value": 258000.0, "weight": 0.223}
        }
    }
}
```

## 3. 数据验证规则

### 3.1 数据完整性验证

```python
# 股票数据验证规则
STOCK_DATA_VALIDATION = {
    'required_columns': ['date', 'open', 'high', 'low', 'close', 'volume'],
    'date_format': '%Y-%m-%d',
    'price_range': (0.01, 10000.0),  # 价格合理范围
    'volume_range': (0, 1e12),       # 成交量合理范围
    'ohlc_logic': True,              # 开高低收逻辑检查
    'missing_data_threshold': 0.05   # 缺失数据阈值5%
}

# 技术指标验证规则
INDICATOR_VALIDATION = {
    'rsi_range': (0, 100),           # RSI范围
    'ema_positive': True,            # EMA必须为正
    'bb_order': True,                # 布林带上轨>中轨>下轨
    'volume_positive': True          # 成交量必须为正
}

# 详细交易记录验证规则
DETAILED_TRADE_VALIDATION = {
    'required_fields': [
        '日期', '交易类型', '股票代码', '股票数量', '交易价格', 
        '交易金额', '手续费', '信号强度评分', '触发原因'
    ],
    'signal_dimensions': [
        '趋势过滤器', '超买超卖信号', '动能确认', '极端价格量能'
    ],
    'dimension_values': ['满足', '不满足'],
    'signal_score_range': (0, 3),
    'trade_types': ['BUY', 'SELL']
}
```

### 3.2 信号有效性验证

```python
# 信号验证规则
SIGNAL_VALIDATION = {
    'confidence_range': (0, 3),      # 信号强度范围
    'required_conditions': 4,        # 必须有4个条件
    'trend_filter_required': True,   # 趋势过滤器必须满足
    'min_score_for_signal': 2        # 最小评分要求
}
```

## 4. 数据流转规范

### 4.1 智能数据获取流程

```
数据请求 → 缓存检查 → 缺失范围识别 → 增量数据获取 → 数据合并 → 数据验证 → 缓存更新
```

**缓存策略详细流程**:
1. **缓存命中**: 直接返回缓存数据，零网络延迟
2. **部分命中**: 仅获取缺失时间段数据，与缓存合并
3. **缓存未命中**: 获取全部数据，建立新缓存

### 4.2 行业信息缓存流程

```
行业信息请求 → 内存缓存检查 → 缓存命中/网络获取 → 缓存存储 → 返回结果
```

**行业缓存优化效果**:
- 单次回测内每股票仅一次网络请求
- 性能提升466倍（从数千次降低到每股票一次）
- 回测时间从4-5小时缩短到15-20分钟

### 4.3 指标计算流程

```
标准化价格数据 → 各类指标计算 → 指标验证 → 背离检测 → 完整指标数据
```

### 4.4 信号生成流程（集成行业缓存）

```
完整指标数据 → 行业信息缓存获取 → 条件判断 → 评分计算 → 信号生成 → 信号验证 → 信号输出
```

### 4.5 回测数据流程

```
历史数据 → 信号回放 → 交易模拟 → 持仓更新 → 绩效计算 → 结果输出 → CSV导出
```

### 4.6 详细交易记录生成流程（新增）

```
交易执行 → 技术指标提取 → 4维信号分析 → 维度状态判断 → 详细记录生成 → CSV导出
```

### 4.7 缓存管理流程

```
缓存统计 → 过期检测 → 缓存清理 → 缓存优化 → 元数据更新
```

## 5. CSV配置管理数据模型

### 5.1 投资组合配置CSV模型

```python
# 投资组合配置文件结构 (Input/portfolio_config.csv)
PORTFOLIO_CONFIG_SCHEMA = {
    'Stock_number': str,           # 股票代码 (如 '601088' 或 'CASH')
    'Stock_name': str,             # 股票名称 (如 '中国神华' 或 '现金')
    'Initial_weight': float,       # 初始权重 (如 0.0615)
    'Industry': str,               # 行业分类 (如 '煤炭开采')
    'DCF_value_per_share': float   # DCF估值每股价值 (如 40.0)
}

# 示例数据
"""
Stock_number,Stock_name,Initial_weight,Industry,DCF_value_per_share
601088,中国神华,0.0615,煤炭开采,40
601225,陕西煤业,0.0653,煤炭开采,40
CASH,现金,0.0093,现金,
"""
```

### 5.2 回测设置CSV模型

```python
# 回测设置文件结构 (Input/Becktest_settings.csv)
BACKTEST_SETTINGS_SCHEMA = {
    'Parameter': str,              # 参数名称
    'Value': Any                   # 参数值 (自动类型转换)
}

# 支持的参数类型
SUPPORTED_PARAMETERS = {
    'total_capital': int,          # 总资金
    'start_date': str,             # 开始日期 (YYYY-MM-DD 或 YYYY/MM/DD)
    'end_date': str,               # 结束日期 (YYYY-MM-DD 或 YYYY/MM/DD)
    'rotation_percentage': float   # 轮动比例 (可选)
}

# 示例数据
"""
Parameter,Value
total_capital,15000000
start_date,2021-01-08
end_date,2025-07-25
"""
```

### 5.3 行业RSI阈值CSV模型

```python
# 行业RSI阈值文件结构 (Input/industry_rsi_thresholds.csv)
INDUSTRY_RSI_SCHEMA = {
    'Industry': str,               # 行业名称
    'RSI_Overbought': float,       # RSI超买阈值
    'RSI_Oversold': float,         # RSI超卖阈值
    'Divergence_Required': str,    # 是否需要背离确认 ('是'/'否')
    'Strategy_Type': str           # 策略类型 ('保守型'/'标准型'等)
}

# 示例数据
"""
Industry,RSI_Overbought,RSI_Oversold,Divergence_Required,Strategy_Type
煤炭开采,75,25,是,保守型
食品制造,70,30,否,标准型
"""
```

### 5.4 CSV配置加载器数据模型

```python
# CSV配置加载结果模型
CSV_CONFIG_RESULT_SCHEMA = {
    'name': str,                   # 配置名称
    'description': str,            # 配置描述
    'total_capital': int,          # 总资金
    'initial_holdings': dict,      # 初始持仓 {股票代码: 权重}
    'start_date': str,             # 开始日期
    'end_date': str,               # 结束日期
    'strategy_params': dict,       # 策略参数
    'cost_config': dict            # 成本配置
}

# 初始持仓结构
INITIAL_HOLDINGS_SCHEMA = {
    'stock_code': float,           # 股票代码对应权重
    'cash': float                  # 现金权重
}

# 示例配置结果
CSV_CONFIG_EXAMPLE = {
    'name': 'CSV配置',
    'description': '从CSV文件加载的投资组合和回测配置',
    'total_capital': 15000000,
    'initial_holdings': {
        '601088': 0.0615,
        '601225': 0.0653,
        'cash': 0.0093
    },
    'start_date': '2021-01-08',
    'end_date': '2025-07-25',
    'strategy_params': {
        'rotation_percentage': 0.1,
        'ema_period': 20,
        'rsi_period': 14
    },
    'cost_config': {
        'commission_rate': 0.0003,
        'stamp_tax_rate': 0.001
    }
}
```

### 5.5 CSV文件验证规则

```python
# 投资组合配置验证规则
PORTFOLIO_CONFIG_VALIDATION = {
    'required_columns': ['Stock_number', 'Stock_name', 'Initial_weight', 'Industry'],
    'weight_sum_tolerance': 0.01,      # 权重总和容差
    'weight_range': (0.0, 1.0),       # 单个权重范围
    'stock_code_pattern': r'^\d{6}$|^CASH$',  # 股票代码格式
    'encoding': 'utf-8-sig'            # 文件编码
}

# 回测设置验证规则
BACKTEST_SETTINGS_VALIDATION = {
    'required_parameters': ['total_capital', 'start_date', 'end_date'],
    'date_formats': ['%Y-%m-%d', '%Y/%m/%d'],  # 支持的日期格式
    'capital_range': (100000, 1000000000),    # 资金范围
    'encoding': 'utf-8'                       # 文件编码
}
```

## 6. 新增功能说明

### 6.1 详细交易记录CSV导出

系统现在会在每次回测完成后自动生成一个详细的交易记录CSV文件，包含：

1. **完整的交易信息**：日期、类型、代码、数量、价格、金额、手续费
2. **技术指标快照**：交易时刻的所有技术指标数值
3. **4维信号分析**：趋势过滤器、超买超卖、动能确认、极端价格量能
4. **信号强度评分**：0-3分的量化评分
5. **触发原因说明**：详细的交易触发原因

### 5.2 缓存系统功能说明

#### 5.2.1 智能数据缓存

系统实现了智能数据缓存机制，包含：

1. **按股票+时间范围缓存**：每只股票的数据按时间范围分别缓存
2. **增量数据获取**：智能检测缓存空缺，仅获取缺失数据
3. **缓存合并**：新数据与现有缓存智能合并，去重排序
4. **元数据管理**：记录缓存范围、更新时间、命中率等

#### 5.2.2 行业信息内存缓存

在SignalGenerator中实现了行业信息缓存，包含：

1. **行业信息缓存**：每只股票的行业分类信息只获取一次
2. **行业规则缓存**：每个行业的RSI阈值和信号规则只获取一次
3. **性能优化**：从数千次网络请求降低到每股票仅一次
4. **缓存统计**：提供缓存命中率和性能提升统计

### 5.3 文件命名规范

- 详细交易记录：`detailed_trading_records_YYYYMMDD_HHMMSS.csv`
- 基础交易记录：`trading_records_YYYYMMDD_HHMMSS.csv`
- HTML报告：`enhanced_backtest_report_YYYYMMDD_HHMMSS.html`

### 5.3 中文字段支持

所有CSV文件都使用UTF-8编码，支持中文字段名，便于中文用户阅读和分析。

---

**数据模型设计原则**：
1. **一致性**：所有模块使用统一的数据格式
2. **可扩展性**：预留字段便于功能扩展
3. **可验证性**：每种数据都有对应的验证规则
4. **可追溯性**：保留完整的数据处理链路
5. **高效性**：优化数据结构以提高处理效率
6. **可读性**：支持中文字段名，便于用户理解（新增）
7. **完整性**：详细记录交易时的技术指标状态（新增）