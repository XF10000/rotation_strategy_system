# 回归测试检查清单

每个阶段完成后，使用此清单确保测试完整性。

---

## 阶段1：配置管理统一化

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置 `Backtest_settings_regression_test.csv`
- [ ] 确认测试时间段：2024-01-01 到 2025-01-01

### 基准测试（优化前）
- [ ] 回退到优化前代码（git stash）
- [ ] 运行基准回测
- [ ] 记录所有关键指标到 `baseline_results.txt`
- [ ] 保存基准报告文件

### 优化后测试
- [ ] 恢复优化后代码（git stash pop）
- [ ] 清理缓存冲突
- [ ] 运行优化后回测
- [ ] 记录所有关键指标到 `optimized_results.txt`
- [ ] 保存优化后报告文件

### 结果对比
- [ ] 总收益率一致（误差=0.00%）
- [ ] 年化收益率一致（误差=0.00%）
- [ ] 最大回撤一致（误差=0.00%）
- [ ] 夏普比率一致（误差=0.000）
- [ ] 总交易次数一致（误差=0）
- [ ] 信号总数一致（误差=0）

### 文档更新
- [ ] 生成验证报告 `PHASE1_VERIFICATION_REPORT.md`
- [ ] 更新 `architecture.md`
- [ ] 更新 `configuration_guide.md`
- [ ] 更新优化计划中的阶段1状态

### 清理
- [ ] 恢复原始配置文件
- [ ] 提交代码到版本控制

**阶段1完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段2：BacktestEngine重构

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置
- [ ] 确认阶段1的基准结果可用

### 基准测试（使用阶段1结果）
- [ ] 使用阶段1的优化后结果作为基准
- [ ] 或重新运行基准测试

### 优化后测试
- [ ] 运行阶段2优化后回测
- [ ] 记录所有关键指标

### 结果对比
- [ ] 所有指标与基准一致

### 文档更新
- [ ] 生成 `PHASE2_VERIFICATION_REPORT.md`
- [ ] 更新相关文档

**阶段2完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段3：策略层重构

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置

### 测试执行
- [ ] 运行回归测试
- [ ] 对比结果

### 文档更新
- [ ] 生成 `PHASE3_VERIFICATION_REPORT.md`

**阶段3完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段4：数据流管道化

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置

### 测试执行
- [ ] 运行回归测试
- [ ] 对比结果

### 文档更新
- [ ] 生成 `PHASE4_VERIFICATION_REPORT.md`

**阶段4完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段5：数据源抽象层优化

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置

### 测试执行
- [ ] 运行回归测试
- [ ] 对比结果

### 文档更新
- [ ] 生成 `PHASE5_VERIFICATION_REPORT.md`

**阶段5完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段6：异常处理和日志

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置

### 测试执行
- [ ] 运行回归测试
- [ ] 对比结果

### 文档更新
- [ ] 生成 `PHASE6_VERIFICATION_REPORT.md`

**阶段6完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 阶段7：测试和文档

### 测试前准备
- [ ] 备份当前配置文件
- [ ] 使用固定测试配置

### 测试执行
- [ ] 运行回归测试
- [ ] 对比结果

### 文档更新
- [ ] 生成 `PHASE7_VERIFICATION_REPORT.md`

**阶段7完成日期**: ___________  
**验证人**: ___________  
**状态**: ✅ 通过 / ❌ 失败

---

## 最终验收

### 整体验证
- [ ] 所有7个阶段的回归测试都通过
- [ ] 最终结果与最初基准完全一致
- [ ] 所有文档已更新
- [ ] 代码已提交到版本控制

**项目完成日期**: ___________  
**最终验收人**: ___________  
**状态**: ✅ 通过 / ❌ 失败
