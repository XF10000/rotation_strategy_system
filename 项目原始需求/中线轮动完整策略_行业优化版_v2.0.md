# 中线轮动完整策略 - 行业优化版 V2.0

## 📋 概述

本策略在V1.0基础上，针对不同申万二级行业的特性，优化了RSI阈值和背离要求，提高信号捕获的精准度和及时性。

## 🎯 核心改进

### 1. 行业特定RSI阈值
- **传统方式**：所有股票统一使用RSI≤30/≥70
- **优化方式**：根据申万二级行业特性设置个性化阈值
- **效果**：避免错过稳定行业的买入机会，提高周期性行业的信号质量

### 2. 灵活的背离要求
- **传统方式**：所有股票强制要求RSI背离确认
- **优化方式**：稳定行业不要求背离，周期性行业保持背离要求
- **效果**：稳定行业信号更及时，周期性行业保持严谨性

## 📊 4维度信号规则（优化版）

### 信号规则总表（共4维，硬性前提 + 3选2）

|维度|阶段高点（卖出 10%）|阶段低点（买入 10%）|
|:--|:--|:--|
|**趋势过滤器（硬性）**|收盘价 > 20 周 EMA 且 EMA 向上|收盘价 < 20 周 EMA 且 EMA 向下|
|**超买/超卖**|14 周 RSI > 70 且出现顶背离|14 周 RSI < 30 且出现底背离|
|**动能确认**|MACD 柱体连续 2 根缩短 或 DIF 死叉 DEA|MACD 柱体连续 2 根缩短 或 DIF 金叉 DEA|
|**极端价格 + 量能**|收盘价 ≥ 布林上轨 且本周量 ≥ 4 周均量 ×1.3|收盘价 ≤ 布林下轨 且本周量 ≥ 4 周均量 ×0.8|

**触发逻辑**：
- 先满足「趋势过滤器」→ 再在其余 3 条里**至少满足 2 条** → 生成信号

**注意**：超买/超卖维度的RSI阈值和背离要求根据行业特性进行优化调整。
# 中线轮动完整策略 - 行业优化版 V2.0

## 📋 概述

本策略在V1.0基础上，针对不同申万二级行业的特性，优化了RSI阈值和背离要求，提高信号捕获的精准度和及时性。

## 🎯 核心改进

### 1. 行业特定RSI阈值
- **传统方式**：所有股票统一使用RSI≤30/≥70
- **优化方式**：根据申万二级行业特性设置个性化阈值
- **效果**：避免错过稳定行业的买入机会，提高周期性行业的信号质量

### 2. 灵活的背离要求
- **传统方式**：所有股票强制要求RSI背离确认
- **优化方式**：稳定行业不要求背离，周期性行业保持背离要求
- **效果**：稳定行业信号更及时，周期性行业保持严谨性


### 2.1 趋势过滤器（硬性前提）
**已更新**：
- **支持卖出信号**：收盘价 > 20周EMA 且 EMA向上
- **支持买入信号**：收盘价 < 20周EMA 且 EMA向下
# 中线轮动完整策略 - 行业优化版 V2.0

## 📋 概述

本策略在V1.0基础上，针对不同申万二级行业的特性，优化了RSI阈值和背离要求，提高信号捕获的精准度和及时性。

## 🎯 核心改进

### 1. 行业特定RSI阈值
- **传统方式**：所有股票统一使用RSI≤30/≥70
- **优化方式**：根据申万二级行业特性设置个性化阈值
- **效果**：避免错过稳定行业的买入机会，提高周期性行业的信号质量

### 2. 灵活的背离要求
- **传统方式**：所有股票强制要求RSI背离确认
- **优化方式**：稳定行业不要求背离，周期性行业保持背离要求
- **效果**：稳定行业信号更及时，周期性行业保持严谨性

## 📊 4维度信号规则（优化版）

# 中线轮动完整策略 - 行业优化版 V2.0

## 📋 概述

本策略在V1.0基础上，针对不同申万二级行业的特性，优化了RSI阈值和背离要求，提高信号捕获的精准度和及时性。

## 🎯 核心改进

### 1. 行业特定RSI阈值
- **传统方式**：所有股票统一使用RSI≤30/≥70
- **优化方式**：根据申万二级行业特性设置个性化阈值
- **效果**：避免错过稳定行业的买入机会，提高周期性行业的信号质量

### 2. 灵活的背离要求
- **传统方式**：所有股票强制要求RSI背离确认
- **优化方式**：稳定行业不要求背离，周期性行业保持背离要求
- **效果**：稳定行业信号更及时，周期性行业保持严谨性

## 📊 4维度信号规则（优化版）

### 2.1 趋势过滤器（硬性前提）
**保持不变**：
- **支持卖出信号**：20周EMA方向向下 或 走平
- **支持买入信号**：20周EMA方向向上 或 走平

### 2.2 超买超卖维度（行业优化）

#### 🔄 传统规则 vs 优化规则

| 处理方式 | RSI阈值 | 背离要求 | 适用范围 |
|---------|---------|----------|----------|
| **传统规则** | 统一30/70 | 强制要求 | 所有股票 |
| **优化规则** | 行业特定 | 行业特定 | 按申万二级行业分类 |

#### 🏭 行业分类规则

**🟢 极度保守型（不要求背离）**
- **RSI阈值**：34-35/74-75
- **行业**：电力、水务、燃气、食品饮料、银行、保险等
- **理由**：波动小，基本面稳定，RSI背离罕见

**🟡 保守型（部分要求背离）**
- **RSI阈值**：32-33/72-73
- **行业**：医药服务、汽车服务、超市等
- **理由**：相对稳定，适度放宽要求

**🟠 标准型（要求背离）**
- **RSI阈值**：30-31/70-71
- **行业**：房地产、基础化工、建筑建材、机械设备等
- **理由**：中等波动，保持传统要求

**🔴 激进型（严格要求背离）**
- **RSI阈值**：28-29/68-69
- **行业**：有色金属、钢铁、煤炭等
- **理由**：强周期性，需要严格确认

**🟣 极度激进型（最严格）**
- **RSI阈值**：≤27/≥67
- **行业**：小金属、半导体等
- **理由**：波动极大，需要极严格确认

#### 📋 具体信号逻辑

```python
def check_rsi_signal(stock_code, rsi_value):
    """检查RSI信号的优化逻辑"""
    
    # 1. 获取行业信息
    industry = get_stock_industry(stock_code)
    industry_rules = get_comprehensive_industry_rules(industry)
    
    # 2. 检查RSI阈值
    rsi_threshold_met = rsi_value <= industry_rules['rsi_thresholds']['oversold']
    
    if not rsi_threshold_met:
        return False  # RSI未达到阈值
    
    # 3. 检查背离要求
    if not industry_rules['divergence_required']:
        # 不要求背离的行业：直接触发信号
        return True
    
    # 4. 要求背离的行业：检查背离
    has_divergence = detect_rsi_divergence()
    if has_divergence:
        return True
    
    # 5. 极端情况：RSI达到极端阈值时免除背离要求
    if rsi_value <= industry_rules['rsi_extreme_threshold']['oversold']:
        return True
    
    return False  # 不满足条件
```

### 2.3 动能确认维度（保持不变）
- **卖出信号**：MACD柱体连续2根缩短 或 DIF死叉DEA
- **买入信号**：MACD柱体连续2根缩短 或 DIF金叉DEA

### 2.4 极端价格+量能维度（保持不变）
- **卖出信号**：收盘价≥布林上轨 且 本周量≥4周均量×1.3
- **买入信号**：收盘价≤布林下轨 且 本周量≥4周均量×0.8

## 🎯 触发逻辑（保持不变）

1. **硬性前提**：趋势过滤器必须支持对应方向的信号
2. **3选2原则**：其余3个维度中至少满足2个
3. **信号生成**：满足条件时生成BUY/SELL信号，否则HOLD

## 📈 实际案例：长江电力优化效果

### 案例背景
- **股票**：600900 长江电力
- **日期**：2022-10-28
- **RSI值**：33.51

### 优化前后对比

| 规则版本 | RSI阈值 | 背离要求 | RSI=33.51判断 | 最终信号 |
|---------|---------|----------|---------------|----------|
| **V1.0传统** | ≤30 | 强制要求 | ❌不满足阈值 | HOLD |
| **V2.0优化** | ≤35 | 不要求 | ✅满足阈值 | BUY |

### 优化效果
- ✅ **成功捕获**：2022-10-28的买入机会
- ✅ **及时信号**：无需等待可能不会出现的背离
- ✅ **行业适配**：针对电力行业特性优化

## 🔧 技术实现

### 配置文件结构
```
config/
├── comprehensive_industry_rules.py     # 完整行业规则配置
├── stock_industry_mapping.py          # 股票代码到行业映射
└── industry_rsi_thresholds.py         # 兼容旧版本的阈值配置
```

### 核心代码更新
- **signal_generator.py**：支持行业特定规则的信号生成
- **各种测试文件**：验证优化效果

## 📊 行业规则速查表

详见：[申万二级行业信号规则对照表.md](申万二级行业信号规则对照表.md)

包含70+个申万二级行业的完整配置，可直接查表使用。

## 🎯 使用建议

### 1. 查表方式
1. 根据股票代码查找申万二级行业
2. 在对照表中找到对应的RSI阈值和背离要求
3. 系统自动应用相应规则

### 2. 特殊情况处理
- **极端RSI值**：达到极端阈值时可免除背离要求
- **行业未覆盖**：回退到传统30/70阈值
- **数据异常**：使用默认规则确保系统稳定

### 3. 动态调整
- 定期回测验证规则有效性
- 根据市场环境微调阈值
- 新增行业时补充规则配置

## 📝 版本更新记录

### V2.0 (2025-01-25)
- ✅ 新增行业特定RSI阈值配置
- ✅ 新增灵活的背离要求设置
- ✅ 新增极端阈值处理逻辑
- ✅ 完善70+个申万二级行业规则
- ✅ 通过长江电力案例验证优化效果

### V1.0 (原版本)
- 统一RSI阈值30/70
- 强制要求RSI背离确认
- 基础4维度信号框架

## 🚀 后续优化方向

1. **动态阈值**：根据市场波动率动态调整阈值
2. **机器学习**：使用历史数据优化行业分类和阈值
3. **多时间框架**：结合日线和月线信号
4. **情绪指标**：加入市场情绪和资金流向指标

---

**注意**：本策略为技术分析工具，投资决策需结合基本面分析和风险管理。